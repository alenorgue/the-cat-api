<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/picocss/1.5.2/pico.min.css"
        integrity="sha512-3gFq2IXMVlAQaUyahzhjDRivv0yqyXTb7xiy6ivTaG5Uz4hKI54uYxpQefdomgDVQ11eJVUbXG0YdPMDISiGgg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>üêà Gato-API üêà</title>
</head>

<body>
    <label for="pets">Choose a pet:</label>
    <select name="pets" id="pets">
        <option value="Cat">Cat</option>
        <option value="Dog">Dog</option>
    </select>

    <div class="container" id="cat-container" style="width:75%; margin: 1rem auto;text-align: center;">
        <img id="cat-image" src="" alt="una mascota">
        <button id="get-pet" style="margin-top: 1rem;">Nueva mascota</button>
    </div>
    <div class="container">
        <h2 id="width">Width: <span></span></h2>
        <h2 id="height">Height: <span></span></h2>
    </div>
    <script>
        // Suerte !
        const petSelector = document.getElementById('pets');
        const button = document.getElementById('get-pet');
        const petImg = document.getElementById('cat-image');
        const width = document.getElementById('width');
        const height = document.getElementById('height');

        async function getCat() {
            try {
                const response = await fetch('https://api.thecatapi.com/v1/images/search');
                const data = await response.json();

                const catData = data[0];
                petImg.src = catData.url;
                width.textContent = catData.width;
                height.textContent = catData.height;
            }
            catch (error) {
                console.error("Error fetching cat image:", error);
            }
        }
        async function getDog() {
            try {
                const response = await fetch('https://api.thedogapi.com/v1/images/search');
                const data = await response.json();
                const dogData = data[0];
                petImg.src = dogData.url;
                width.textContent = dogData.width;
                height.textContent = dogData.height;
            } catch (error) {
                console.error("Error fetching dog image:", error);
            }
        }

        function updatePetFetcher() {
            const selectedPet = petSelector.value;
            if (selectedPet === "Cat") {
                button.textContent = "Nuevo Gato";
                button.onclick = getCat;
            } else if (selectedPet === "Dog") {
                button.textContent = "Nuevo Perro";
                button.onclick = getDog;
            }
        }

        petSelector.addEventListener('change', updatePetFetcher);

    </script>
</body>

</html>